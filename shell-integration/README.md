# Shell é›†æˆæŒ‡å—

æœ¬ç›®å½•åŒ…å«äº†å°†ä»»åŠ¡ç®¡ç†å™¨é›†æˆåˆ°ç»ˆç«¯Shellçš„é…ç½®æ–‡ä»¶å’Œè„šæœ¬ã€‚

## é›†æˆæ–¹å¼

### 1. Starship Prompt é›†æˆï¼ˆæ¨èï¼‰

[Starship](https://starship.rs/) æ˜¯ä¸€ä¸ªå¿«é€Ÿã€å¯å®šåˆ¶çš„shellæç¤ºç¬¦ã€‚

**å®‰è£…æ­¥éª¤ï¼š**

1. å®‰è£… Starshipï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰ï¼š
   ```bash
   curl -sS https://starship.rs/install.sh | sh
   ```

2. å°† `starship.toml` ä¸­çš„é…ç½®æ·»åŠ åˆ°æ‚¨çš„ Starship é…ç½®æ–‡ä»¶ï¼š
   ```bash
   cat starship.toml >> ~/.config/starship.toml
   ```

3. é‡å¯ç»ˆç«¯æˆ–æ‰§è¡Œï¼š
   ```bash
   source ~/.bashrc  # æˆ– ~/.zshrc
   ```

**æ•ˆæœï¼š**
- åœ¨æç¤ºç¬¦ä¸­æ˜¾ç¤ºå¾…åŠä»»åŠ¡æ•°é‡ ğŸ“‹ 3
- æ˜¾ç¤ºé«˜ä¼˜å…ˆçº§ä»»åŠ¡æ•°é‡ ğŸ”´ 1

### 2. Bash/Zsh Prompt ç›´æ¥é›†æˆ

å¦‚æœæ‚¨ä¸ä½¿ç”¨ Starshipï¼Œå¯ä»¥ç›´æ¥å°†è„šæœ¬é›†æˆåˆ° shell é…ç½®ä¸­ã€‚

**å®‰è£…æ­¥éª¤ï¼š**

1. å¤åˆ¶è„šæœ¬åˆ°é…ç½®ç›®å½•ï¼š
   ```bash
   cp tasks-prompt.sh ~/.config/
   ```

2. åœ¨ `~/.bashrc` æˆ– `~/.zshrc` ä¸­æ·»åŠ ï¼š
   ```bash
   source ~/.config/tasks-prompt.sh
   ```

3. é‡æ–°åŠ è½½é…ç½®ï¼š
   ```bash
   source ~/.bashrc  # æˆ– ~/.zshrc
   ```

**åŠŸèƒ½ï¼š**
- âœ… æ˜¾ç¤ºä»»åŠ¡ç»Ÿè®¡åœ¨æç¤ºç¬¦ä¸­
- âœ… å¿«æ·é”® `Ctrl+T` å¿«é€Ÿæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
- âœ… ä¾¿æ·åˆ«åï¼š`t`, `tl`, `ta`, `ts`

### 3. Terminator ç»ˆç«¯é…ç½®

å¯¹äº Terminator ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œæ‚¨å¯ä»¥ï¼š

1. **å¿«æ·é”®é…ç½®**ï¼š
   æ‰“å¼€ Terminator â†’ Preferences â†’ Keybindings
   æ·»åŠ è‡ªå®šä¹‰å¿«æ·é”®è¿è¡Œ `tasks show`

2. **å³é”®èœå•**ï¼š
   ç¼–è¾‘ `~/.config/terminator/config`ï¼Œæ·»åŠ è‡ªå®šä¹‰å‘½ä»¤ï¼š
   ```ini
   [keybindings]
     # æ·»åŠ å¿«æ·é”®
     # Ctrl+Alt+T æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
   ```

### 4. ç‚¹å‡»å±•å¼€åŠŸèƒ½ï¼ˆå®éªŒæ€§ï¼‰

æŸäº›ç°ä»£ç»ˆç«¯ï¼ˆå¦‚ Kittyã€WezTermï¼‰æ”¯æŒ OSC 8 è¶…é“¾æ¥ï¼Œå¯ä»¥å®ç°ç‚¹å‡»å±•å¼€æ•ˆæœã€‚

**ç¤ºä¾‹é…ç½®**ï¼ˆéœ€è¦ç»ˆç«¯æ”¯æŒï¼‰ï¼š
```bash
# åœ¨ prompt ä¸­æ·»åŠ å¯ç‚¹å‡»é“¾æ¥
echo -e "\e]8;;command://tasks show\e\\\ğŸ“‹ Tasks\e]8;;\e\\"
```

## ä½¿ç”¨è¯´æ˜

å®‰è£…åï¼Œæ‚¨çš„ç»ˆç«¯æç¤ºç¬¦ä¼šæ˜¾ç¤ºä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š

```
ğŸ“‹ 5 ğŸ”´ 2 user@host:~/project$
```

è¿™è¡¨ç¤ºï¼š
- ğŸ“‹ 5ï¼šå…±æœ‰ 5 ä¸ªå¾…åŠä»»åŠ¡
- ğŸ”´ 2ï¼šå…¶ä¸­ 2 ä¸ªæ˜¯é«˜ä¼˜å…ˆçº§

### å¿«æ·é”®

- `Ctrl+T`ï¼šå¿«é€Ÿæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ TUI
- `t`ï¼š`tasks` çš„åˆ«å
- `tl`ï¼š`tasks list` çš„åˆ«å
- `ta <title>`ï¼šå¿«é€Ÿæ·»åŠ ä»»åŠ¡
- `ts`ï¼šæ‰“å¼€ TUI ç•Œé¢

## è‡ªå®šä¹‰

æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ `tasks-prompt.sh` ä¸­çš„ `get_task_stats()` å‡½æ•°æ¥è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹ã€‚

ä¾‹å¦‚ï¼Œåªæ˜¾ç¤ºä»Šå¤©çš„ä»»åŠ¡ï¼š
```bash
get_task_stats() {
    local today_tasks=$(tasks list 2>/dev/null | grep $(date +%Y-%m-%d) | wc -l)
    [ "$today_tasks" -gt 0 ] && echo -n "ğŸ“… $today_tasks "
}
```

## æ•…éšœæ’é™¤

å¦‚æœé›†æˆä¸å·¥ä½œï¼Œè¯·æ£€æŸ¥ï¼š

1. âœ… `tasks` å‘½ä»¤æ˜¯å¦åœ¨ PATH ä¸­ï¼š
   ```bash
   command -v tasks
   ```

2. âœ… Shell é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½ï¼š
   ```bash
   echo $SHELL
   ```

3. âœ… æƒé™æ˜¯å¦æ­£ç¡®ï¼š
   ```bash
   chmod +x ~/.config/tasks-prompt.sh
   ```
